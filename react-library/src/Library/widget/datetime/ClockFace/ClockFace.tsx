//
import s from './clock-face.module.sass';



// 
interface IPropsClockFace {
    cs?: string,
    mode: 'hours' | 'minutes',
    value: number,
    onSetValue: (value: number) => void,
}

export const ClockFace = (
    {
        cs = '', mode, value, onSetValue,
    }: IPropsClockFace
): JSX.Element => {

    // 
    const getButtonItem = (hour: number, r: number, cx: number, cy: number) => (
        <circle
            className={`${s['button-item']} ${value === hour ? s['button-active'] : s['button-inactive']}`}
            r={r} cx={cx} cy={cy} fill="transparent"
            onClick={() => onSetValue(hour)}
        />
    )

    const getTextItem = (hour: number, x: number, y: number) => (
        <text
            className={`${s['text-item']} ${value === hour ? s['text-active'] : s['text-inactive']}`}
            textAnchor="middle" fontSize="25"
            x={x} y={y} fill="#000"
            onClick={() => onSetValue(hour)}
        >
            {hour}
        </text>
    )

    const getCircle = (hour: number,
        r: number, cx: number, cy: number,
        x: number, y: number,
    ) => (<>
        {getButtonItem(hour, r, cx, cy)}
        {getTextItem(hour, x, y)}
    </>)

    const getArrowHours = () => {
        return (
            <line
                className={(mode === 'hours') ? s['arrow-active'] : s['arrow-inactive']}
                x1="0" y1="0" x2="0" y2="-90" stroke="#8BC34A" strokeWidth="8"
                transform={`rotate(${value * 30})`}
            />
        );
    }

    const getArrowMinutes = () => {
        return (
            <line className={(mode === 'minutes') ? s['arrow-active'] : s['arrow-inactive']}
                x1="0" y1="0" x2="0" y2="-150" strokeWidth="2"
                transform={`rotate(${value * 6})`}
            />
        );
    }

    // 
    const getStyle = () => {
        return cs + ' ' + s['clock-face'];
    }

    return (
        <div className={getStyle()}>
            <svg viewBox="0,0,400,400">
                <g transform="translate(200,200) ">
                    <circle r="192" fill="#eee" stroke="#bdbdbd" strokeWidth="2"></circle>
                    {mode === 'hours' ? getArrowHours() : getArrowMinutes()}
                    <circle r="15" fill="#757575"></circle>

                    {(mode === 'hours') && (<>
                        {getCircle(0, 30, 0, - 162, 0, -155)}
                        {getCircle(1, 30, 80.99999999999999, -140.29611541307906, 80.99999999999999, -133.29611541307906)}
                        {getCircle(2, 30, 140.29611541307906, -81.00000000000001, 140.29611541307906, -74.00000000000001)}
                        {getCircle(3, 30, 162, -9.919639073093561e-15, 162, 6.99999999999999)}
                        {getCircle(4, 30, 140.29611541307906, 80.99999999999996, 140.29611541307906, 87.99999999999996)}
                        {getCircle(5, 30, 80.99999999999999, 140.29611541307906, 80.99999999999999, 147.29611541307906)}
                        {getCircle(6, 30, 1.9839278146187122e-14, 162, 1.9839278146187122e-14, 169)}
                        {getCircle(7, 30, -81.00000000000001, 140.29611541307906, -81.00000000000001, 147.29611541307906)}
                        {getCircle(8, 30, -140.296115413079, 81.00000000000007, -140.296115413079, 88.00000000000007)}
                        {getCircle(9, 30, -162, 2.975891721928068e-14, -162, 7.00000000000003)}
                        {getCircle(10, 30, -140.29611541307906, -81.00000000000001, -140.29611541307906, -74.00000000000001)}
                        {getCircle(11, 30, -81.00000000000007, -140.296115413079, -81.00000000000007, -133.296115413079)}
                        {getCircle(12, 30, 0, -110, 0, -103)}
                        {getCircle(13, 30, 54.99999999999999, -95.26279441628826, 54.99999999999999, -88.26279441628826)}
                        {getCircle(14, 30, 95.26279441628824, -55.000000000000014, 95.26279441628824, -48.000000000000014)}
                        {getCircle(15, 30, 110, -6.735557395310443e-15, 110, 6.999999999999993)}
                        {getCircle(16, 30, 95.26279441628826, 54.99999999999998, 95.26279441628826, 61.99999999999998)}
                        {getCircle(17, 30, 54.99999999999999, 95.26279441628826, 54.99999999999999, 102.26279441628826)}
                        {getCircle(18, 30, 1.3471114790620885e-14, 110, 1.3471114790620885e-14, 117)}
                        {getCircle(19, 30, -55.000000000000014, 95.26279441628824, -55.000000000000014, 102.26279441628824)}
                        {getCircle(20, 30, -95.26279441628822, 55.00000000000005, -95.26279441628822, 62.00000000000005)}
                        {getCircle(21, 30, -110, 2.0206672185931328e-14, -110, 7.00000000000002)}
                        {getCircle(22, 30, -95.26279441628824, -55.000000000000014, -95.26279441628824, -48.000000000000014)}
                        {getCircle(23, 30, -55.00000000000005, -95.26279441628822, -55.00000000000005, -88.26279441628822)}
                    </>)}

                    {(mode === 'minutes') && (<>
                        {getButtonItem(0, 30, 0, -162)}
                        {getButtonItem(1, 20, 16.515497196289246, -157.13445946818717)}
                        {getButtonItem(2, 20, 32.85004714920597, -154.5473209159413)}
                        {getButtonItem(3, 20, 48.82468511124169, -150.26692957463425)}
                        {getButtonItem(4, 20, 64.26438960597642, -144.34018230753094)}
                        {getButtonItem(5, 30, 80.99999999999999, -140.29611541307906)}
                        {getButtonItem(6, 20, 92.87006986221076, -127.82468511124169)}
                        {getButtonItem(7, 20, 105.7226358046996, -117.41688242542828)}
                        {getButtonItem(8, 20, 117.41688242542828, -105.7226358046996)}
                        {getButtonItem(9, 20, 127.82468511124169, -92.87006986221076)}
                        {getButtonItem(10, 30, 140.29611541307906, -81.00000000000001)}
                        {getButtonItem(11, 20, 144.34018230753094, -64.26438960597646)}
                        {getButtonItem(12, 20, 150.26692957463425, -48.8246851112417)}
                        {getButtonItem(13, 20, 154.5473209159413, -32.850047149205956)}
                        {getButtonItem(14, 20, 157.13445946818717, -16.515497196289246)}
                        {getButtonItem(15, 30, 162, -9.919639073093561e-15)}
                        {getButtonItem(16, 20, 157.1344594681872, 16.515497196289225)}
                        {getButtonItem(17, 20, 154.5473209159413, 32.85004714920594)}
                        {getButtonItem(18, 20, 150.26692957463428, 48.82468511124168)}
                        {getButtonItem(19, 20, 144.34018230753097, 64.2643896059764)}
                        {getButtonItem(20, 30, 140.29611541307906, 80.99999999999996)}
                        {getButtonItem(21, 20, 127.82468511124169, 92.87006986221074)}
                        {getButtonItem(22, 20, 117.41688242542833, 105.72263580469955)}
                        {getButtonItem(23, 20, 105.72263580469956, 117.41688242542831)}
                        {getButtonItem(24, 20, 92.87006986221077, 127.82468511124168)}
                        {getButtonItem(25, 30, 80.99999999999999, 140.29611541307906)}
                        {getButtonItem(26, 20, 64.2643896059764, 144.34018230753097)}
                        {getButtonItem(27, 20, 48.824685111241706, 150.26692957463425)}
                        {getButtonItem(28, 20, 32.85004714920597, 154.5473209159413)}
                        {getButtonItem(29, 20, 16.51549719628929, 157.13445946818717)}
                        {getButtonItem(30, 30, 1.9839278146187122e-14, 162)}
                        {getButtonItem(31, 20, -16.515497196289253, 157.13445946818717)}
                        {getButtonItem(32, 20, -32.850047149205935, 154.5473209159413)}
                        {getButtonItem(33, 20, -48.82468511124174, 150.26692957463425)}
                        {getButtonItem(34, 20, -64.26438960597638, 144.34018230753097)}
                        {getButtonItem(35, 30, -81.00000000000001, 140.29611541307906)}
                        {getButtonItem(36, 20, -92.87006986221074, 127.82468511124172)}
                        {getButtonItem(37, 20, -105.7226358046996, 117.41688242542828)}
                        {getButtonItem(38, 20, -117.41688242542826, 105.72263580469964)}
                        {getButtonItem(39, 20, -127.82468511124168, 92.87006986221077)}
                        {getButtonItem(40, 30, -140.296115413079, 81.00000000000007)}
                        {getButtonItem(41, 20, -144.34018230753097, 64.26438960597642)}
                        {getButtonItem(42, 20, -150.26692957463425, 48.82468511124171)}
                        {getButtonItem(43, 20, -154.54732091594127, 32.85004714920605)}
                        {getButtonItem(44, 20, -157.13445946818717, 16.51549719628937)}
                        {getButtonItem(45, 30, -162, 2.975891721928068e-14)}
                        {getButtonItem(46, 20, -157.13445946818717, -16.515497196289314)}
                        {getButtonItem(47, 20, -154.54732091594127, -32.85004714920599)}
                        {getButtonItem(48, 20, -150.26692957463428, -48.82468511124166)}
                        {getButtonItem(49, 20, -144.34018230753097, -64.26438960597636)}
                        {getButtonItem(50, 30, -140.29611541307906, -81.00000000000001)}
                        {getButtonItem(51, 20, -127.82468511124172, -92.87006986221073)}
                        {getButtonItem(52, 20, -117.41688242542826, -105.72263580469964)}
                        {getButtonItem(53, 20, -105.72263580469969, -117.4168824254282)}
                        {getButtonItem(54, 20, -92.87006986221078, -127.82468511124168)}
                        {getButtonItem(55, 30, -81.00000000000007, -140.296115413079)}
                        {getButtonItem(56, 20, -64.26438960597642, -144.34018230753097)}
                        {getButtonItem(57, 20, -48.824685111241735, -150.26692957463425)}
                        {getButtonItem(58, 20, -32.85004714920606, -154.54732091594127)}
                        {getButtonItem(59, 20, -16.51549719628938, -157.13445946818717)}

                        {getTextItem(0, 0, -155)}
                        {getTextItem(5, 80.99999999999999, -133.29611541307906)}
                        {getTextItem(10, 140.29611541307906, -74.00000000000001)}
                        {getTextItem(15, 162, 6.99999999999999)}
                        {getTextItem(20, 140.29611541307906, 87.99999999999996)}
                        {getTextItem(25, 80.99999999999999, 147.29611541307906)}
                        {getTextItem(30, 1.9839278146187122e-14, 169)}
                        {getTextItem(35, -81.00000000000001, 147.29611541307906)}
                        {getTextItem(40, -140.296115413079, 88.00000000000007)}
                        {getTextItem(45, -162, 7.00000000000003)}
                        {getTextItem(50, -140.29611541307906, -74.00000000000001)}
                        {getTextItem(55, -81.00000000000007, -133.296115413079)}
                    </>)}
                </g>
            </svg>
        </div>
    );
}
